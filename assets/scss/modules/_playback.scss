// ========================
// Playlist Playback
// ========================
.playlist{
	position: relative;
	padding: 1.5em 0;
	@extend .clearfix;
}

.playback-tracks{
	float: left;
	width: 50%;
}

$playback-artwork-width: 60px;

.playback-track{
	visibility: hidden;
	display: table;
	position: absolute;
	width: 50%;
	overflow: hidden;
	@extend .transition-slow;
	left: 0;

	@include smaller-than(extra-large){
		padding-left: 10px;
	}

	&.current{
		visibility: visible;
	}

	&.marquee-container:after{
		content: '';
		position: absolute;
		top: 0;
		bottom: 0;
		right: -3em;
		width: 3em;
		-webkit-box-shadow: -15px 0 30px white;
		box-shadow: -15px 0 30px white;
	}

	&:last-child{ //This is so the last track slides from the second position on reveal, not the first. Probably a better way to do this.
		left: $playback-artwork-width;
	}

	.finished & {
		display: block;
		margin: 0 0 1em;
	}

	&:not(.current) .playback-track-artwork img{
		-webkit-filter: grayscale(100%);
		filter: grayscale(100%);
		opacity: 0.5;
	}
}

.playback-track-artwork{
	display: table-cell;
	vertical-align: middle;
	width: $playback-artwork-width;

	a{
		display: block;
		overflow: hidden;
		width: $playback-artwork-width;
	}

	img{
		width: $playback-artwork-width;

		&.landscape{
			width: $playback-artwork-width * 1.333333; //60px * 1.333333 (youtube aspect ratio)
			margin-left: -10px;
		}
	}
}

.playback-header{
	position: relative;
	float: right;
	width: 50%;
	padding-top: 5px;
	text-align: center;
	font-family: $sans-special;

	@include smaller-than(extra-large){
		padding-right: 10px;
	}

	h1{
		margin-bottom: 0.25em;
	}
}

.playback-logo{
	float: right;
	width: 50px;

	img{
		width: 100%;
	}
}

.playback-header-meta{
	position: absolute;
	right: 70px;
	text-align: right;

	@include smaller-than(extra-large){
		right: 80px;
	}

	h2{
		font-weight: 600;
	}
}

.total-time{
	opacity: 0.5;
}

@-webkit-keyframes titleMarquee {
  0%   { transform: translate(0, 0); }
  100% { transform: translate(-100%, 0); }
}

@keyframes titleMarquee {
  0%   { transform: translate(0, 0); }
  100% { transform: translate(-100%, 0); }
}

.playback-track-title{
	display: none;
	vertical-align: middle;
	border-left: 10px solid white;
	overflow: hidden;

	&:hover{
		text-decoration: underline;

		.marquee{
			-webkit-animation: titleMarquee 7s 1 linear;
			animation: titleMarquee 7s 1 linear;
			-webkit-animation-delay: 0.5s;
		}
	}

	a{
		height: 1em;
		line-height: 1em;
		display: block;
		white-space: nowrap;
	}

	.current &{
		display: table-cell;
	}
}

.playlist-controls{
	display: none;
	vertical-align: middle;
	width: 10px;
	padding-left: 15px;

	.current &{
		display: table-cell;
	}
}

.mute-toggle{
	@include icomoon('volume');
	cursor: pointer;

	button{
		margin: 0;
		padding: 0;
		background: 0;
		border: 0;
		text-indent: -9999px;
	}

	&.muted{
		@include icomoon('mute');
	}
}

.loading-message {
	font-family: $sans-special;
	font-size: 2em;
	text-align: center;

	.loading-indicator {
		margin: 1em 0;
	}
}

.playlist,
.loading-message,
.welcome-message,
.playlist-full-message,
.playlist-progress {
	display: none;
}

// Playback states

.playlist-full {
	.playlist-full-message {
		display: block;
	}
	.loading-message {
		display: none !important;
	}
}

.playlist-waiting {
	.welcome-message {
		display: block;
	}
	.loading-message {
		display: none !important;
	}
}

.playlist-loading {
	.loading-message {
		display: block;
	}
}

.playlist-playing {
	.main-header{
		display: none;
	}

	.playlist, .playlist-progress {
		display: block;
	}

	a#barometer_tab{
		top: auto;
		bottom: 5%;
	}
}